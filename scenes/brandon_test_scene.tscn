[gd_scene load_steps=14 format=3 uid="uid://t3k3es580mfg"]

[ext_resource type="Environment" uid="uid://jvmpkdwaeaq" path="res://scenes/main-environment.tres" id="1_hysi3"]
[ext_resource type="PackedScene" uid="uid://dl2ed4gkybggf" path="res://objects/player.tscn" id="2_m85j0"]
[ext_resource type="Script" uid="uid://33e1q6e2hxxy" path="res://scripts/hud.gd" id="3_tv7oe"]
[ext_resource type="FontFile" uid="uid://biqtga8moh7ah" path="res://fonts/lilita_one_regular.ttf" id="4_atogf"]
[ext_resource type="PackedScene" uid="uid://d2g78tpqbyf5g" path="res://objects/enemy.tscn" id="5_xlm5l"]
[ext_resource type="PackedScene" uid="uid://r7rt7pth4u7o" path="res://objects/wall_low.tscn" id="6_a4y6h"]
[ext_resource type="PackedScene" uid="uid://dpm3l05d7fu35" path="res://objects/platform.tscn" id="7_bf361"]
[ext_resource type="PackedScene" uid="uid://c71evdjblk5wp" path="res://objects/wall_high.tscn" id="8_nfdda"]
[ext_resource type="PackedScene" uid="uid://bvx5cvigosg0s" path="res://objects/platform_large_grass.tscn" id="9_6uufr"]
[ext_resource type="PackedScene" uid="uid://oqfhfp1a80qd" path="res://objects/cloud.tscn" id="10_0opn3"]
[ext_resource type="PackedScene" uid="uid://bh2veun7ypcig" path="res://objects/enemy_humanoid.tscn" id="11_m85j0"]

[sub_resource type="LabelSettings" id="LabelSettings_fpmwk"]
font = ExtResource("4_atogf")
font_size = 36
outline_size = 12
outline_color = Color(0, 0, 0, 0.470588)

[sub_resource type="NavigationMesh" id="NavigationMesh_hysi3"]
vertices = PackedVector3Array(-24.5957, 0.7, -22.0468, -22.0957, 0.7, -24.5468, -22.3457, 0.7, -25.5468, -25.0957, 0.7, -25.0468, -25.5957, 0.7, -22.2968, -5.09572, 0.7, -9.0468, -3.09572, 0.7, -9.5468, -3.09572, 0.7, -24.5468, -5.34572, 0.7, -8.0468, -24.5957, 0.7, -8.0468, 23.6543, 0.7, -25.5468, 22.4043, 0.7, -25.5468, 22.1543, 0.7, -24.5468, 24.6543, 0.7, -22.0468, 25.6543, 0.7, -22.2968, 25.1543, 0.7, -24.7968, 16.6543, 0.7, -17.0468, 17.4043, 0.7, -15.7968, 24.6543, 0.7, -15.7968, 16.1543, 0.7, -24.5468, 16.1543, 0.7, -17.0468, -2.09572, 0.7, -9.5468, -1.84572, 0.7, -9.0468, 3.40428, 0.7, -11.0468, 3.15428, 0.7, -12.2968, 4.15428, 0.7, -12.7968, 4.15428, 0.7, -24.5468, 15.1543, 0.7, -14.5468, 16.4043, 0.7, -14.5468, 16.4043, 0.7, -14.7968, 15.1543, 0.7, -15.7968, 5.40428, 0.7, -12.2968, 14.4043, 0.7, -13.7968, 15.1543, 0.7, -16.5468, 14.4043, 0.7, -13.0468, 16.9043, 0.7, -14.7968, 16.6543, 0.7, -13.0468, 14.9043, 0.7, -12.5468, 12.6543, 0.7, -2.7968, 12.6543, 0.7, -1.0468, 24.6543, 0.7, -1.0468, -30.5957, 3.9, -14.2968, -30.3457, 3.9, -13.0468, -29.5957, 3.9, -13.5468, -29.8457, 3.9, -14.2968, 4.90428, 0.7, -10.0468, 8.90428, 0.7, -2.7968, 9.15428, 0.7, -3.2968, 5.90428, 0.7, -10.7968, 12.4043, 0.7, -3.2968, 5.40428, 0.7, 9.7032, 6.15428, 0.7, 8.7032, 4.90428, 0.7, 7.7032, 2.40428, 0.7, 9.4532, 7.65428, 0.7, 4.9532, 7.90428, 0.7, 5.4532, 9.40428, 0.7, 3.7032, 8.90428, 0.7, 3.4532, -2.09572, 0.7, -7.5468, 6.40428, 0.7, 4.9532, -0.845722, 0.7, 4.9532, 4.90428, 0.7, 6.4532, -0.845722, 0.7, 7.7032, -3.59572, 0.7, 4.7032, -3.84572, 0.7, -7.0468, -4.59572, 0.7, 8.9532, -3.84572, 0.7, 8.2032, -4.34572, 0.7, 7.7032, -16.8457, 0.7, 18.4532, -15.0957, 0.7, 18.7032, -14.8457, 0.7, 18.4532, -14.8457, 0.7, 16.7032, -6.59572, 0.7, 8.9532, -4.34572, 0.7, 5.2032, -4.84572, 0.7, -7.0468, -24.5957, 0.7, 18.9532, -17.0957, 0.7, 18.9532, -13.5957, 0.7, 16.4532, -6.84572, 0.7, 10.4532, -28.8457, 18.7, -4.7968, -28.0957, 18.7, -4.5468, -28.0957, 18.7, -5.0468, 1.90428, 4.3, -4.0468, 1.90428, 4.3, -2.7968, 3.15428, 4.3, -2.7968, 3.15428, 4.3, -4.0468, -7.09572, 3.5, -3.0468, -7.09572, 3.5, -1.7968, -5.84572, 3.5, -1.7968, -5.84572, 3.5, -3.0468, 10.6543, 1.5, -2.2968, 10.6543, 1.5, 2.7032, 11.6543, 1.5, 2.7032, 11.6543, 1.5, -2.2968, 12.6543, 0.7, 1.4532, 24.6543, 0.7, 1.4532, 7.40428, 0.7, 9.2032, 5.40428, 0.7, 10.9532, 5.65428, 0.7, 24.7032, 25.1543, 0.7, 24.7032, 25.6543, 0.7, 22.4532, 24.6543, 0.7, 22.2032, 22.1543, 0.7, 24.7032, 22.4043, 0.7, 25.7032, 9.15428, 0.7, 7.4532, 9.15428, 0.7, 6.4532, 12.4043, 0.7, 3.7032, -3.09572, 2.3, 5.9532, -3.09572, 2.3, 7.2032, -1.84572, 2.3, 7.2032, -1.84572, 2.3, 5.9532, 6.90428, 2.3, 7.9532, 7.90428, 2.3, 7.2032, 7.15428, 2.3, 6.2032, 6.15428, 2.3, 6.7032, -4.09572, 0.7, 9.2032, -4.09572, 0.7, 10.7032, -1.09572, 0.7, 8.2032, 1.90428, 0.7, 9.7032, -1.84572, 0.7, 22.9532, -0.345722, 0.7, 24.7032, 5.15428, 0.7, 11.4532, 2.15428, 0.7, 11.4532, -3.34572, 0.7, 22.9532, -15.0957, 0.7, 19.7032, -13.0957, 0.7, 18.4532, -6.59572, 0.7, 10.9532, -13.0957, 0.7, 16.7032, -16.0957, 0.7, 19.9532, -16.0957, 0.7, 24.7032, -5.09572, 0.7, 24.7032, -24.5957, 0.7, 22.2032, -25.5957, 0.7, 22.4532, -25.0957, 0.7, 24.9532, -22.3457, 0.7, 25.7032, -22.0957, 0.7, 24.7032, -17.0957, 0.7, 19.7032, -3.59572, 4.7, 25.2032, -3.09572, 4.7, 26.2032, -1.84572, 4.7, 25.4532, -2.59572, 4.7, 24.4532)
polygons = [PackedInt32Array(4, 3, 0), PackedInt32Array(0, 3, 1), PackedInt32Array(1, 3, 2), PackedInt32Array(7, 6, 5), PackedInt32Array(5, 8, 7), PackedInt32Array(7, 8, 1), PackedInt32Array(1, 8, 0), PackedInt32Array(0, 8, 9), PackedInt32Array(11, 10, 12), PackedInt32Array(12, 10, 15), PackedInt32Array(12, 15, 13), PackedInt32Array(13, 15, 14), PackedInt32Array(17, 16, 18), PackedInt32Array(18, 16, 13), PackedInt32Array(13, 16, 12), PackedInt32Array(12, 16, 19), PackedInt32Array(16, 20, 19), PackedInt32Array(23, 22, 21), PackedInt32Array(23, 21, 24), PackedInt32Array(24, 21, 6), PackedInt32Array(24, 6, 25), PackedInt32Array(25, 6, 26), PackedInt32Array(26, 6, 7), PackedInt32Array(28, 27, 29), PackedInt32Array(29, 27, 30), PackedInt32Array(31, 25, 32), PackedInt32Array(32, 25, 33), PackedInt32Array(33, 25, 19), PackedInt32Array(19, 25, 26), PackedInt32Array(30, 27, 32), PackedInt32Array(33, 30, 32), PackedInt32Array(19, 20, 33), PackedInt32Array(32, 34, 31), PackedInt32Array(29, 35, 28), PackedInt32Array(28, 35, 36), PackedInt32Array(36, 38, 37), PackedInt32Array(35, 17, 36), PackedInt32Array(36, 17, 18), PackedInt32Array(38, 36, 39), PackedInt32Array(39, 36, 40), PackedInt32Array(40, 36, 18), PackedInt32Array(44, 43, 41), PackedInt32Array(41, 43, 42), PackedInt32Array(46, 45, 47), PackedInt32Array(47, 45, 48), PackedInt32Array(37, 38, 49), PackedInt32Array(34, 37, 31), PackedInt32Array(31, 37, 48), PackedInt32Array(48, 37, 47), PackedInt32Array(47, 37, 49), PackedInt32Array(51, 50, 52), PackedInt32Array(52, 50, 53), PackedInt32Array(57, 56, 54), PackedInt32Array(54, 56, 55), PackedInt32Array(22, 23, 58), PackedInt32Array(58, 23, 45), PackedInt32Array(58, 45, 46), PackedInt32Array(54, 59, 57), PackedInt32Array(57, 59, 46), PackedInt32Array(61, 60, 59), PackedInt32Array(52, 53, 61), PackedInt32Array(61, 53, 62), PackedInt32Array(61, 62, 60), PackedInt32Array(60, 63, 59), PackedInt32Array(59, 63, 46), PackedInt32Array(46, 63, 58), PackedInt32Array(58, 63, 64), PackedInt32Array(67, 66, 65), PackedInt32Array(70, 69, 71), PackedInt32Array(71, 69, 68), PackedInt32Array(65, 72, 67), PackedInt32Array(67, 72, 73), PackedInt32Array(74, 64, 63), PackedInt32Array(63, 73, 74), PackedInt32Array(74, 73, 8), PackedInt32Array(68, 76, 75), PackedInt32Array(71, 68, 75), PackedInt32Array(77, 71, 78), PackedInt32Array(78, 71, 72), PackedInt32Array(72, 71, 73), PackedInt32Array(73, 71, 75), PackedInt32Array(73, 75, 8), PackedInt32Array(8, 75, 9), PackedInt32Array(81, 80, 79), PackedInt32Array(85, 84, 82), PackedInt32Array(82, 84, 83), PackedInt32Array(89, 88, 86), PackedInt32Array(86, 88, 87), PackedInt32Array(93, 92, 90), PackedInt32Array(90, 92, 91), PackedInt32Array(39, 40, 94), PackedInt32Array(94, 40, 95), PackedInt32Array(51, 96, 50), PackedInt32Array(50, 96, 97), PackedInt32Array(97, 96, 98), PackedInt32Array(100, 99, 101), PackedInt32Array(101, 99, 102), PackedInt32Array(102, 99, 103), PackedInt32Array(96, 104, 98), PackedInt32Array(98, 104, 102), PackedInt32Array(102, 104, 101), PackedInt32Array(101, 104, 95), PackedInt32Array(56, 105, 55), PackedInt32Array(106, 94, 95), PackedInt32Array(104, 106, 95), PackedInt32Array(105, 56, 104), PackedInt32Array(104, 56, 106), PackedInt32Array(110, 109, 107), PackedInt32Array(107, 109, 108), PackedInt32Array(113, 112, 114), PackedInt32Array(114, 112, 111), PackedInt32Array(66, 115, 65), PackedInt32Array(115, 66, 116), PackedInt32Array(116, 66, 117), PackedInt32Array(117, 62, 118), PackedInt32Array(118, 62, 53), PackedInt32Array(120, 119, 98), PackedInt32Array(98, 119, 122), PackedInt32Array(98, 122, 121), PackedInt32Array(121, 97, 98), PackedInt32Array(118, 122, 117), PackedInt32Array(117, 122, 116), PackedInt32Array(116, 122, 119), PackedInt32Array(116, 119, 123), PackedInt32Array(69, 70, 124), PackedInt32Array(124, 70, 125), PackedInt32Array(125, 127, 126), PackedInt32Array(129, 128, 124), PackedInt32Array(129, 124, 125), PackedInt32Array(126, 127, 78), PackedInt32Array(78, 127, 77), PackedInt32Array(126, 116, 125), PackedInt32Array(125, 116, 123), PackedInt32Array(125, 123, 130), PackedInt32Array(125, 130, 129), PackedInt32Array(132, 131, 133), PackedInt32Array(133, 131, 135), PackedInt32Array(133, 135, 134), PackedInt32Array(128, 129, 136), PackedInt32Array(136, 129, 135), PackedInt32Array(131, 75, 135), PackedInt32Array(135, 75, 136), PackedInt32Array(136, 75, 76), PackedInt32Array(137, 140, 138), PackedInt32Array(138, 140, 139)]

[node name="Main" type="Node3D"]

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = ExtResource("1_hysi3")

[node name="Player" parent="." node_paths=PackedStringArray("crosshair") instance=ExtResource("2_m85j0")]
base_movement_speed = 8
base_slide_speed = 9
max_slide_speed = 11
crosshair = NodePath("../HUD/Crosshair")

[node name="Sun" type="DirectionalLight3D" parent="."]
transform = Transform3D(-0.422618, -0.694272, 0.582563, 0, 0.642788, 0.766044, -0.906308, 0.323744, -0.271654, 0, 0, 0)
shadow_enabled = true
shadow_opacity = 0.75

[node name="HUD" type="CanvasLayer" parent="."]
script = ExtResource("3_tv7oe")

[node name="Crosshair" type="TextureRect" parent="HUD"]
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -20.0
offset_top = -20.0
offset_right = 20.0
offset_bottom = 20.0
grow_horizontal = 2
grow_vertical = 2
scale = Vector2(0.35, 0.35)
pivot_offset = Vector2(64, 64)

[node name="Health" type="Label" parent="HUD"]
offset_left = 48.0
offset_top = 627.0
offset_right = 138.0
offset_bottom = 672.0
size_flags_horizontal = 0
size_flags_vertical = 8
text = "100%"
label_settings = SubResource("LabelSettings_fpmwk")
vertical_alignment = 2

[node name="Enemies" type="Node" parent="."]

[node name="enemy-flying" parent="Enemies" node_paths=PackedStringArray("player") instance=ExtResource("5_xlm5l")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.5, 0.728827, -9)
player = NodePath("../../Player")

[node name="enemy-flying2" parent="Enemies" node_paths=PackedStringArray("player") instance=ExtResource("5_xlm5l")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -5.69311, 0.482282, 11.5154)
player = NodePath("../../Player")

[node name="enemy-flying3" parent="Enemies" node_paths=PackedStringArray("player") instance=ExtResource("5_xlm5l")]
transform = Transform3D(-0.707107, 0, -0.707107, 0, 1, 0, 0.707107, 0, -0.707107, 5.5, 0.82456, 12.0913)
player = NodePath("../../Player")

[node name="enemy-flying4" parent="Enemies" node_paths=PackedStringArray("player") instance=ExtResource("5_xlm5l")]
transform = Transform3D(0.707107, 0, -0.707107, 0, 1, 0, 0.707107, 0, 0.707107, 6.19572, 0.438616, -11.8576)
player = NodePath("../../Player")

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="."]
navigation_mesh = SubResource("NavigationMesh_hysi3")

[node name="enemy-humanoid" parent="NavigationRegion3D" instance=ExtResource("11_m85j0")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -8)
player_path = NodePath("../../Player")

[node name="Level" type="Node" parent="NavigationRegion3D"]

[node name="wall-low" parent="NavigationRegion3D/Level" instance=ExtResource("6_a4y6h")]
transform = Transform3D(0.965926, 0, 0.258819, 0, 1, 0, -0.258819, 0, 0.965926, -3.55333, 0.05, -8.26898)

[node name="wall-low3" parent="NavigationRegion3D/Level" instance=ExtResource("6_a4y6h")]
transform = Transform3D(-1, 0, -1.19209e-07, 0, 1, 0, 1.19209e-07, 0, -1, 3.63223, 0.05, 10.4473)

[node name="platform" parent="NavigationRegion3D/Level" instance=ExtResource("7_bf361")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.5, 1, 6.5)

[node name="platform2" parent="NavigationRegion3D/Level" instance=ExtResource("7_bf361")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -6.5, 2.5, -2.5)

[node name="platform3" parent="NavigationRegion3D/Level" instance=ExtResource("7_bf361")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2.5, 3, -3.5)

[node name="platform4" parent="NavigationRegion3D/Level" instance=ExtResource("7_bf361")]
transform = Transform3D(0.707107, 0, -0.707107, 0, 1, 0, 0.707107, 0, 0.707107, 7, 1, 7)

[node name="wall-high" parent="NavigationRegion3D/Level" instance=ExtResource("8_nfdda")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -5.5, 0, 10)

[node name="wall-high2" parent="NavigationRegion3D/Level" instance=ExtResource("8_nfdda")]
transform = Transform3D(0.707107, 0, -0.707107, 0, 1, 0, 0.707107, 0, 0.707107, 4.5, 0, -11.5)

[node name="platform-large-grass" parent="NavigationRegion3D/Level" instance=ExtResource("9_6uufr")]
transform = Transform3D(10, 0, 0, 0, 1, 0, 0, 0, 10, 0, -0.5, 0)

[node name="CSGPolygon3D" type="CSGPolygon3D" parent="NavigationRegion3D/Level"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 9.07916, 0, 3)
use_collision = true
polygon = PackedVector2Array(0, 0, 1.60592, 0.993088, 3, 1, 3, 0)
depth = 5.78

[node name="Decoration" type="Node" parent="NavigationRegion3D"]

[node name="cube2" parent="NavigationRegion3D/Decoration" instance=ExtResource("10_0opn3")]
transform = Transform3D(1.49603, 0.232188, 3.70243, 1.85892, 3.40786, -0.964843, -3.21035, 2.08149, 1.16666, -9.48509, 8.49799, 20.5554)

[node name="cube9" parent="NavigationRegion3D/Decoration" instance=ExtResource("10_0opn3")]
transform = Transform3D(1.49603, 1.85892, -3.21035, 0.232188, 3.40786, 2.08149, 3.70243, -0.964843, 1.16666, 25.5597, 6.35221, -12.1167)

[node name="cube5" parent="NavigationRegion3D/Decoration" instance=ExtResource("10_0opn3")]
transform = Transform3D(3.0771, 1.12972, -2.29242, -0.0239142, 3.60054, 1.74228, 2.55556, -1.32658, 2.77656, 6.4111, 6.35221, -28.6551)

[node name="cube3" parent="NavigationRegion3D/Decoration" instance=ExtResource("10_0opn3")]
transform = Transform3D(2.12132, 0, 2.12132, 0, 3, 0, -2.12132, 0, 2.12132, -2.75413, 2.42683, 25.3984)

[node name="cube10" parent="NavigationRegion3D/Decoration" instance=ExtResource("10_0opn3")]
transform = Transform3D(0.776457, -2.89778, 2.66454e-15, 1.44889, 0.388229, -2.59808, 2.50955, 0.672432, 1.5, 27.5131, 12.0265, -5.37209)

[node name="cube11" parent="NavigationRegion3D/Decoration" instance=ExtResource("10_0opn3")]
transform = Transform3D(0.672432, 2.89778, -0.388229, -2.50955, 0.776457, 1.44889, 1.5, 0, 2.59808, -28.6125, 16.2998, -4.89238)

[node name="cube12" parent="NavigationRegion3D/Decoration" instance=ExtResource("10_0opn3")]
transform = Transform3D(0.672432, 2.89778, -0.388229, -2.50955, 0.776457, 1.44889, 1.5, 0, 2.59808, -25.14, 8.80719, -24.2564)

[node name="cube6" parent="NavigationRegion3D/Decoration" instance=ExtResource("10_0opn3")]
transform = Transform3D(-1.73205, 0.965926, 0.258819, -1, -1.67303, -0.448288, 0, -0.517638, 1.93185, 14.1295, 10.1139, 17.5347)

[node name="cube7" parent="NavigationRegion3D/Decoration" instance=ExtResource("10_0opn3")]
transform = Transform3D(1.41421, 0, -1.41421, 1, 1.41421, 1, 1, -1.41421, 1, -5.11081, 2.42683, -36.641)

[node name="cube8" parent="NavigationRegion3D/Decoration" instance=ExtResource("10_0opn3")]
transform = Transform3D(1.73205, 0, 1, 0, 2, 0, -1, 0, 1.73205, -30.1261, 2.42683, -13.7339)

[node name="cube4" parent="NavigationRegion3D/Decoration" instance=ExtResource("10_0opn3")]
transform = Transform3D(1.12202, 1.39419, -2.40776, 1.53922, 1.85165, 1.78946, 2.31773, -1.90463, -0.0227883, -0.881504, 13.0297, -30.1859)

[connection signal="health_updated" from="Player" to="HUD" method="_on_health_updated"]
