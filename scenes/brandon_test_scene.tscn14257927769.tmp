[gd_scene load_steps=14 format=3 uid="uid://t3k3es580mfg"]

[ext_resource type="Environment" uid="uid://jvmpkdwaeaq" path="res://scenes/main-environment.tres" id="1_hysi3"]
[ext_resource type="PackedScene" uid="uid://dl2ed4gkybggf" path="res://objects/player.tscn" id="2_m85j0"]
[ext_resource type="Script" uid="uid://33e1q6e2hxxy" path="res://scripts/hud.gd" id="3_tv7oe"]
[ext_resource type="FontFile" uid="uid://biqtga8moh7ah" path="res://fonts/lilita_one_regular.ttf" id="4_atogf"]
[ext_resource type="PackedScene" uid="uid://d2g78tpqbyf5g" path="res://objects/enemy.tscn" id="5_xlm5l"]
[ext_resource type="PackedScene" uid="uid://r7rt7pth4u7o" path="res://objects/wall_low.tscn" id="6_a4y6h"]
[ext_resource type="PackedScene" uid="uid://xh7qo3fjn53j" path="res://objects/enemy_horde.tscn" id="6_m85j0"]
[ext_resource type="PackedScene" uid="uid://dpm3l05d7fu35" path="res://objects/platform.tscn" id="7_bf361"]
[ext_resource type="PackedScene" uid="uid://c71evdjblk5wp" path="res://objects/wall_high.tscn" id="8_nfdda"]
[ext_resource type="PackedScene" uid="uid://bvx5cvigosg0s" path="res://objects/platform_large_grass.tscn" id="9_6uufr"]
[ext_resource type="PackedScene" uid="uid://oqfhfp1a80qd" path="res://objects/cloud.tscn" id="10_0opn3"]

[sub_resource type="LabelSettings" id="LabelSettings_fpmwk"]
font = ExtResource("4_atogf")
font_size = 36
outline_size = 12
outline_color = Color(0, 0, 0, 0.470588)

[sub_resource type="NavigationMesh" id="NavigationMesh_hysi3"]
vertices = PackedVector3Array(-5.34572, 4.25, -36.5468, -4.34572, 4, -37.0468, -4.84572, 3.5, -37.5468, -5.84572, 3.75, -37.2968, -1.34572, 15.5, -29.7968, -1.84572, 14.75, -29.0468, -1.34572, 14.75, -28.7968, -0.845722, 15.5, -29.7968, -1.59572, 14.75, -31.5468, 0.654278, 14.75, -29.7968, -0.0957222, 14.25, -31.5468, 0.279278, 14.75, -30.6718, -0.845722, 14.75, -31.5468, 7.65428, 8.75, -28.2968, 8.65428, 8.25, -28.7968, 8.65428, 8.25, -29.2968, 6.90428, 8.25, -30.7968, 6.90428, 9, -27.0468, 7.65428, 9, -27.5468, 6.15428, 8.25, -30.7968, 4.90428, 9, -29.2968, 4.90428, 9, -28.5468, -26.3457, 10.75, -23.7968, -24.5957, 11.25, -23.7968, -24.3457, 11, -24.5468, -24.3457, 10.5, -25.5468, -26.0957, 10.25, -25.5468, -26.3457, 10.5, -25.0468, -24.5957, 0.5, -22.0468, -22.0957, 0.5, -24.5468, -22.3457, 0.25, -25.5468, -25.0957, 0.25, -25.0468, -25.5957, 0.25, -22.2968, -5.09572, 0.5, -9.0468, -3.09572, 0.5, -9.5468, -3.09572, 0.5, -24.5468, -5.34572, 0.5, -8.0468, -24.5957, 0.5, -8.0468, 23.6543, 0.25, -25.5468, 22.4043, 0.25, -25.5468, 22.1543, 0.5, -24.5468, 24.6543, 0.5, -22.0468, 25.6543, 0.25, -22.2968, 25.1543, 0.25, -24.7968, 4.40428, 0.5, -24.5468, 5.90428, 0.5, -11.7968, 12.4043, 0.5, -3.2968, 24.6543, 0.5, -1.0468, 12.6543, 0.5, -1.0468, 4.40428, 0.5, -12.7968, 5.90428, 0.5, -11.0468, 9.65428, 0.5, -3.2968, -2.09572, 0.5, -9.5468, -1.84572, 0.5, -9.0468, 3.15428, 0.5, -11.2968, 3.15428, 0.5, -12.2968, -30.8457, 3.75, -14.0468, -30.3457, 3.75, -13.0468, -29.3457, 3.75, -13.5468, -29.8457, 3.75, -14.5468, 25.1543, 9.25, -10.7968, 26.4043, 9, -10.7968, 27.9043, 8, -11.5468, 26.9043, 8, -14.0468, 24.4043, 9, -13.2968, 5.15428, 0.5, 9.4532, 5.40428, 0.5, 9.9532, 6.40428, 0.5, 8.9532, 4.90428, 0.5, 7.7032, 2.40428, 0.5, 9.4532, 7.65428, 0.5, 4.9532, 7.90428, 0.5, 5.4532, 9.65428, 0.5, 3.7032, 9.40428, 0.75, 2.7032, -0.845722, 0.5, 4.9532, 4.90428, 0.5, 6.4532, 6.40428, 0.5, 4.9532, 4.40428, 0.5, -10.0468, -2.09572, 0.5, -7.5468, 5.15428, 0.5, -10.0468, 9.40428, 0.75, -2.2968, -0.845722, 0.5, 7.7032, 11.6543, 1.25, 2.7032, 11.6543, 1.25, -2.2968, -3.59572, 0.5, 4.7032, -3.84572, 0.5, -7.0468, -4.59572, 0.5, 8.9532, -3.84572, 0.5, 8.2032, -4.34572, 0.5, 7.7032, -6.59572, 0.5, 8.9532, -4.34572, 0.5, 5.2032, -4.84572, 0.5, -7.0468, -24.5957, 0.5, 9.9532, -6.84572, 0.5, 9.9532, 26.6543, 14.25, -4.7968, 28.6543, 14.25, -5.0468, 28.4043, 13.5, -6.7968, 26.4043, 13.5, -6.5468, -29.8457, 18.25, -4.2968, -28.0957, 18.75, -4.2968, -27.8457, 18.5, -5.0468, -27.8457, 18, -6.2968, -29.5957, 17.5, -6.2968, -29.8457, 18, -5.5468, 1.90428, 4, -4.0468, 1.90428, 4, -2.7968, 3.15428, 4, -2.7968, 3.15428, 4, -4.0468, -7.09572, 3.5, -3.0468, -7.09572, 3.5, -1.7968, -5.84572, 3.5, -1.7968, -5.84572, 3.5, -3.0468, 12.6543, 0.5, 1.4532, 24.6543, 0.5, 1.4532, 7.40428, 0.5, 9.2032, 5.40428, 0.5, 10.9532, 5.65428, 0.5, 24.7032, 25.1543, 0.25, 24.7032, 25.6543, 0.25, 22.4532, 24.6543, 0.5, 22.2032, 22.1543, 0.5, 24.7032, 22.4043, 0.25, 25.7032, 9.15428, 0.5, 7.4532, 9.15428, 0.5, 6.4532, 12.4043, 0.5, 3.7032, -3.09572, 2, 5.9532, -3.09572, 2, 7.2032, -1.84572, 2, 7.2032, -1.84572, 2, 5.9532, 6.90428, 2, 7.9532, 7.90428, 2, 7.2032, 7.15428, 2, 6.2032, 6.15428, 2, 6.7032, -4.09572, 0.5, 9.2032, -4.09572, 0.5, 10.7032, 2.15428, 0.5, 11.4532, 1.90428, 0.5, 9.7032, -1.09572, 0.5, 8.2032, -4.59572, 0.5, 10.9532, -3.84572, 0.5, 23.2032, -1.84572, 0.5, 22.9532, 5.15428, 0.5, 11.4532, -0.345722, 0.5, 24.7032, -24.5957, 0.5, 22.2032, -25.5957, 0.25, 22.4532, -25.0957, 0.25, 24.9532, -22.3457, 0.25, 25.7032, -22.0957, 0.5, 24.7032, -6.59572, 0.5, 10.9532, -5.09572, 0.5, 24.7032, 13.4043, 11.5, 17.2032, 13.4043, 11.25, 18.2032, 14.6543, 11.75, 18.2032, 14.6543, 11.75, 17.2032, -8.59572, 10, 22.7032, -7.59572, 11, 20.9532, -7.59572, 11, 20.2032, -10.0957, 11.5, 19.4532, -11.0957, 10.75, 21.4532, -11.0957, 10.5, 22.2032, -3.09572, 4.25, 26.7032, -2.34572, 4.25, 26.7032, -1.34572, 4.25, 25.7032, -2.59572, 4.25, 23.9532, -4.09572, 4.25, 25.2032)
polygons = [PackedInt32Array(1, 0, 2), PackedInt32Array(2, 0, 3), PackedInt32Array(5, 4, 6), PackedInt32Array(6, 4, 7), PackedInt32Array(4, 8, 7), PackedInt32Array(10, 11, 12), PackedInt32Array(12, 11, 8), PackedInt32Array(8, 11, 7), PackedInt32Array(7, 11, 9), PackedInt32Array(14, 13, 15), PackedInt32Array(15, 13, 16), PackedInt32Array(13, 18, 17), PackedInt32Array(19, 16, 20), PackedInt32Array(20, 16, 21), PackedInt32Array(21, 16, 13), PackedInt32Array(21, 13, 17), PackedInt32Array(24, 23, 25), PackedInt32Array(25, 23, 26), PackedInt32Array(26, 23, 27), PackedInt32Array(27, 23, 22), PackedInt32Array(32, 31, 28), PackedInt32Array(28, 31, 29), PackedInt32Array(29, 31, 30), PackedInt32Array(35, 34, 33), PackedInt32Array(33, 36, 35), PackedInt32Array(35, 36, 29), PackedInt32Array(29, 36, 28), PackedInt32Array(28, 36, 37), PackedInt32Array(39, 38, 40), PackedInt32Array(40, 38, 43), PackedInt32Array(40, 43, 41), PackedInt32Array(41, 43, 42), PackedInt32Array(40, 41, 44), PackedInt32Array(44, 41, 45), PackedInt32Array(45, 41, 46), PackedInt32Array(46, 41, 47), PackedInt32Array(47, 48, 46), PackedInt32Array(45, 49, 44), PackedInt32Array(50, 45, 51), PackedInt32Array(51, 45, 46), PackedInt32Array(53, 52, 54), PackedInt32Array(54, 52, 55), PackedInt32Array(44, 49, 55), PackedInt32Array(52, 34, 55), PackedInt32Array(55, 34, 35), PackedInt32Array(55, 35, 44), PackedInt32Array(59, 58, 56), PackedInt32Array(56, 58, 57), PackedInt32Array(61, 60, 62), PackedInt32Array(62, 60, 63), PackedInt32Array(63, 60, 64), PackedInt32Array(67, 66, 65), PackedInt32Array(67, 65, 68), PackedInt32Array(68, 65, 69), PackedInt32Array(71, 70, 72), PackedInt32Array(72, 70, 73), PackedInt32Array(75, 74, 76), PackedInt32Array(77, 79, 53), PackedInt32Array(53, 79, 78), PackedInt32Array(70, 76, 73), PackedInt32Array(73, 76, 80), PackedInt32Array(68, 69, 75), PackedInt32Array(75, 69, 81), PackedInt32Array(75, 81, 74), PackedInt32Array(80, 83, 73), PackedInt32Array(73, 83, 82), PackedInt32Array(50, 51, 79), PackedInt32Array(79, 51, 80), PackedInt32Array(74, 84, 76), PackedInt32Array(76, 84, 80), PackedInt32Array(80, 84, 78), PackedInt32Array(80, 78, 79), PackedInt32Array(78, 84, 85), PackedInt32Array(53, 54, 77), PackedInt32Array(88, 87, 86), PackedInt32Array(86, 89, 88), PackedInt32Array(88, 89, 90), PackedInt32Array(90, 89, 91), PackedInt32Array(91, 89, 36), PackedInt32Array(89, 93, 36), PackedInt32Array(36, 93, 92), PackedInt32Array(36, 92, 37), PackedInt32Array(85, 84, 91), PackedInt32Array(91, 84, 90), PackedInt32Array(97, 96, 94), PackedInt32Array(94, 96, 95), PackedInt32Array(103, 102, 98), PackedInt32Array(98, 102, 99), PackedInt32Array(99, 102, 100), PackedInt32Array(100, 102, 101), PackedInt32Array(107, 106, 104), PackedInt32Array(104, 106, 105), PackedInt32Array(111, 110, 108), PackedInt32Array(108, 110, 109), PackedInt32Array(48, 47, 112), PackedInt32Array(112, 47, 113), PackedInt32Array(67, 114, 66), PackedInt32Array(66, 114, 115), PackedInt32Array(115, 114, 116), PackedInt32Array(118, 117, 119), PackedInt32Array(119, 117, 120), PackedInt32Array(120, 117, 121), PackedInt32Array(114, 122, 116), PackedInt32Array(116, 122, 120), PackedInt32Array(120, 122, 119), PackedInt32Array(119, 122, 113), PackedInt32Array(72, 123, 71), PackedInt32Array(124, 112, 113), PackedInt32Array(122, 124, 113), PackedInt32Array(123, 72, 122), PackedInt32Array(122, 72, 124), PackedInt32Array(128, 127, 125), PackedInt32Array(125, 127, 126), PackedInt32Array(131, 130, 132), PackedInt32Array(132, 130, 129), PackedInt32Array(87, 133, 86), PackedInt32Array(133, 87, 134), PackedInt32Array(134, 87, 137), PackedInt32Array(134, 137, 136), PackedInt32Array(134, 136, 135), PackedInt32Array(137, 81, 136), PackedInt32Array(136, 81, 69), PackedInt32Array(134, 135, 138), PackedInt32Array(138, 135, 140), PackedInt32Array(138, 140, 139), PackedInt32Array(141, 115, 116), PackedInt32Array(142, 140, 116), PackedInt32Array(116, 140, 135), PackedInt32Array(116, 135, 141), PackedInt32Array(144, 143, 145), PackedInt32Array(145, 143, 147), PackedInt32Array(145, 147, 146), PackedInt32Array(93, 148, 139), PackedInt32Array(139, 149, 93), PackedInt32Array(93, 149, 147), PackedInt32Array(93, 147, 143), PackedInt32Array(93, 143, 92), PackedInt32Array(148, 138, 139), PackedInt32Array(153, 152, 150), PackedInt32Array(150, 152, 151), PackedInt32Array(155, 154, 156), PackedInt32Array(156, 154, 157), PackedInt32Array(157, 154, 158), PackedInt32Array(158, 154, 159), PackedInt32Array(161, 160, 162), PackedInt32Array(162, 160, 164), PackedInt32Array(162, 164, 163)]
agent_max_slope = 60.0

[node name="Main" type="Node3D"]

[node name="Player" parent="." node_paths=PackedStringArray("crosshair") instance=ExtResource("2_m85j0")]
base_movement_speed = 8
base_slide_speed = 9
max_slide_speed = 11
crosshair = NodePath("../HUD/Crosshair")

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = ExtResource("1_hysi3")

[node name="Sun" type="DirectionalLight3D" parent="."]
transform = Transform3D(-0.422618, -0.694272, 0.582563, 0, 0.642788, 0.766044, -0.906308, 0.323744, -0.271654, 0, 0, 0)
shadow_enabled = true
shadow_opacity = 0.75

[node name="HUD" type="CanvasLayer" parent="."]
script = ExtResource("3_tv7oe")

[node name="Crosshair" type="TextureRect" parent="HUD"]
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -20.0
offset_top = -20.0
offset_right = 20.0
offset_bottom = 20.0
grow_horizontal = 2
grow_vertical = 2
scale = Vector2(0.35, 0.35)
pivot_offset = Vector2(64, 64)

[node name="Health" type="Label" parent="HUD"]
offset_left = 48.0
offset_top = 627.0
offset_right = 138.0
offset_bottom = 672.0
size_flags_horizontal = 0
size_flags_vertical = 8
text = "100%"
label_settings = SubResource("LabelSettings_fpmwk")
vertical_alignment = 2

[node name="Enemies" type="Node" parent="."]

[node name="enemy-flying" parent="Enemies" node_paths=PackedStringArray("player") instance=ExtResource("5_xlm5l")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.5, 0.728827, -9)
player = NodePath("../../Player")

[node name="enemy-flying2" parent="Enemies" node_paths=PackedStringArray("player") instance=ExtResource("5_xlm5l")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -5.69311, 0.482282, 11.5154)
player = NodePath("../../Player")

[node name="enemy-flying3" parent="Enemies" node_paths=PackedStringArray("player") instance=ExtResource("5_xlm5l")]
transform = Transform3D(-0.707107, 0, -0.707107, 0, 1, 0, 0.707107, 0, -0.707107, 5.5, 0.82456, 12.0913)
player = NodePath("../../Player")

[node name="enemy-flying4" parent="Enemies" node_paths=PackedStringArray("player") instance=ExtResource("5_xlm5l")]
transform = Transform3D(0.707107, 0, -0.707107, 0, 1, 0, 0.707107, 0, 0.707107, 6.19572, 0.438616, -11.8576)
player = NodePath("../../Player")

[node name="enemy-horde" parent="Enemies" node_paths=PackedStringArray("movement_target_position") instance=ExtResource("6_m85j0")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -12)
movement_speed = 6.0
movement_target_position = NodePath("../../Player")

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="."]
navigation_mesh = SubResource("NavigationMesh_hysi3")

[node name="Level" type="Node" parent="NavigationRegion3D"]

[node name="wall-low" parent="NavigationRegion3D/Level" instance=ExtResource("6_a4y6h")]
transform = Transform3D(0.965926, 0, 0.258819, 0, 1, 0, -0.258819, 0, 0.965926, -3.55333, 0.05, -8.26898)

[node name="wall-low3" parent="NavigationRegion3D/Level" instance=ExtResource("6_a4y6h")]
transform = Transform3D(-1, 0, -1.19209e-07, 0, 1, 0, 1.19209e-07, 0, -1, 3.63223, 0.05, 10.4473)

[node name="platform" parent="NavigationRegion3D/Level" instance=ExtResource("7_bf361")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.5, 1, 6.5)

[node name="platform2" parent="NavigationRegion3D/Level" instance=ExtResource("7_bf361")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -6.5, 2.5, -2.5)

[node name="platform3" parent="NavigationRegion3D/Level" instance=ExtResource("7_bf361")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2.5, 3, -3.5)

[node name="platform4" parent="NavigationRegion3D/Level" instance=ExtResource("7_bf361")]
transform = Transform3D(0.707107, 0, -0.707107, 0, 1, 0, 0.707107, 0, 0.707107, 7, 1, 7)

[node name="wall-high" parent="NavigationRegion3D/Level" instance=ExtResource("8_nfdda")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -5.5, 0, 10)

[node name="wall-high2" parent="NavigationRegion3D/Level" instance=ExtResource("8_nfdda")]
transform = Transform3D(0.707107, 0, -0.707107, 0, 1, 0, 0.707107, 0, 0.707107, 4.5, 0, -11.5)

[node name="platform-large-grass" parent="NavigationRegion3D/Level" instance=ExtResource("9_6uufr")]
transform = Transform3D(10, 0, 0, 0, 1, 0, 0, 0, 10, 0, -0.5, 0)

[node name="CSGPolygon3D" type="CSGPolygon3D" parent="NavigationRegion3D/Level"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 9.07916, 0, 3)
use_collision = true
polygon = PackedVector2Array(0, 0, 1.60592, 0.993088, 3, 1, 3, 0)
depth = 5.78

[node name="Decoration" type="Node" parent="NavigationRegion3D"]

[node name="cube2" parent="NavigationRegion3D/Decoration" instance=ExtResource("10_0opn3")]
transform = Transform3D(1.49603, 0.232188, 3.70243, 1.85892, 3.40786, -0.964843, -3.21035, 2.08149, 1.16666, -9.48509, 8.49799, 20.5554)

[node name="cube9" parent="NavigationRegion3D/Decoration" instance=ExtResource("10_0opn3")]
transform = Transform3D(1.49603, 1.85892, -3.21035, 0.232188, 3.40786, 2.08149, 3.70243, -0.964843, 1.16666, 25.5597, 6.35221, -12.1167)

[node name="cube5" parent="NavigationRegion3D/Decoration" instance=ExtResource("10_0opn3")]
transform = Transform3D(3.0771, 1.12972, -2.29242, -0.0239142, 3.60054, 1.74228, 2.55556, -1.32658, 2.77656, 6.4111, 6.35221, -28.6551)

[node name="cube3" parent="NavigationRegion3D/Decoration" instance=ExtResource("10_0opn3")]
transform = Transform3D(2.12132, 0, 2.12132, 0, 3, 0, -2.12132, 0, 2.12132, -2.75413, 2.42683, 25.3984)

[node name="cube10" parent="NavigationRegion3D/Decoration" instance=ExtResource("10_0opn3")]
transform = Transform3D(0.776457, -2.89778, 2.66454e-15, 1.44889, 0.388229, -2.59808, 2.50955, 0.672432, 1.5, 27.5131, 12.0265, -5.37209)

[node name="cube11" parent="NavigationRegion3D/Decoration" instance=ExtResource("10_0opn3")]
transform = Transform3D(0.672432, 2.89778, -0.388229, -2.50955, 0.776457, 1.44889, 1.5, 0, 2.59808, -28.6125, 16.2998, -4.89238)

[node name="cube12" parent="NavigationRegion3D/Decoration" instance=ExtResource("10_0opn3")]
transform = Transform3D(0.672432, 2.89778, -0.388229, -2.50955, 0.776457, 1.44889, 1.5, 0, 2.59808, -25.14, 8.80719, -24.2564)

[node name="cube6" parent="NavigationRegion3D/Decoration" instance=ExtResource("10_0opn3")]
transform = Transform3D(-1.73205, 0.965926, 0.258819, -1, -1.67303, -0.448288, 0, -0.517638, 1.93185, 14.1295, 10.1139, 17.5347)

[node name="cube7" parent="NavigationRegion3D/Decoration" instance=ExtResource("10_0opn3")]
transform = Transform3D(1.41421, 0, -1.41421, 1, 1.41421, 1, 1, -1.41421, 1, -5.11081, 2.42683, -36.641)

[node name="cube8" parent="NavigationRegion3D/Decoration" instance=ExtResource("10_0opn3")]
transform = Transform3D(1.73205, 0, 1, 0, 2, 0, -1, 0, 1.73205, -30.1261, 2.42683, -13.7339)

[node name="cube4" parent="NavigationRegion3D/Decoration" instance=ExtResource("10_0opn3")]
transform = Transform3D(1.12202, 1.39419, -2.40776, 1.53922, 1.85165, 1.78946, 2.31773, -1.90463, -0.0227883, -0.881504, 13.0297, -30.1859)

[connection signal="health_updated" from="Player" to="HUD" method="_on_health_updated"]
