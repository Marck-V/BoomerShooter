[gd_scene load_steps=18 format=4 uid="uid://dxnrf1ck88yxe"]

[ext_resource type="Script" uid="uid://bdfvqqqqskaso" path="res://LevelManager.gd" id="1_ckm7l"]
[ext_resource type="PackedScene" uid="uid://dpm3l05d7fu35" path="res://objects/platform.tscn" id="2_6shu3"]
[ext_resource type="PackedScene" uid="uid://dl2ed4gkybggf" path="res://objects/player.tscn" id="3_gi8j2"]
[ext_resource type="Script" uid="uid://33e1q6e2hxxy" path="res://scripts/hud.gd" id="4_yxwn6"]
[ext_resource type="FontFile" uid="uid://biqtga8moh7ah" path="res://fonts/lilita_one_regular.ttf" id="5_gtg8j"]
[ext_resource type="Environment" uid="uid://jvmpkdwaeaq" path="res://scenes/main-environment.tres" id="6_vtbbq"]
[ext_resource type="PackedScene" uid="uid://vbp1uai2kl1t" path="res://objects/key.tscn" id="7_6shu3"]
[ext_resource type="PackedScene" uid="uid://d2g78tpqbyf5g" path="res://objects/enemy.tscn" id="8_gi8j2"]
[ext_resource type="Script" uid="uid://bc6mfq3ssor4q" path="res://addons/func_godot/src/map/func_godot_map.gd" id="10_ndmtw"]
[ext_resource type="Resource" uid="uid://bkhxcqsquw1yg" path="res://addons/func_godot/func_godot_default_map_settings.tres" id="11_51fhi"]
[ext_resource type="Material" uid="uid://g1l8euhy1o6" path="res://trenchbroom/textures/world/texture_02.tres" id="11_ndmtw"]
[ext_resource type="Material" uid="uid://bketfk52opqbk" path="res://trenchbroom/textures/world/texture_13_wall.tres" id="12_51fhi"]

[sub_resource type="LabelSettings" id="LabelSettings_nu0x4"]
font = ExtResource("5_gtg8j")
font_size = 36
outline_size = 12
outline_color = Color(0, 0, 0, 0.470588)

[sub_resource type="ArrayMesh" id="ArrayMesh_ndmtw"]
_surfaces = [{
"aabb": AABB(0, -0.5, 0, 33, 0.5, 37.5),
"attribute_data": PackedByteArray("AAAAAAAAoL0AAAAAAACAvQAAhL8AAIC9AACEvwAAoL0AAIC9AACgvQAAjj8AAKC9AACOPwAAgL0AAIC9AACAvQAAgD0AAIS/AACAPQAAAAAAAI6/AAAAAAAAjr8AAIS/AACAvQAAdL8AAI4/AAB0vwAAjj8AAKA9AACAvQAAoD0AAIA9AACgvQAAgD0AAIC9AACOvwAAgL0AAI6/AACgvQAAAAAAAKC9AACEPwAAoL0AAIQ/AACAvQAAAAAAAIC9"),
"format": 34359742487,
"index_count": 36,
"index_data": PackedByteArray("AAABAAIAAAACAAMABAAFAAYABAAGAAcACAAJAAoACAAKAAsADAANAA4ADAAOAA8AEAARABIAEAASABMAFAAVABYAFAAWABcA"),
"material": ExtResource("11_ndmtw"),
"name": "world/texture_02",
"primitive": 3,
"uv_scale": Vector4(0, 0, 0, 0),
"vertex_count": 24,
"vertex_data": PackedByteArray("AAAAAAAAAAAAAAAAAAAAgAAAAL8AAACAAAAEQgAAAL8AAAAAAAAEQgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABZCAAAAAAAAAL8AABZCAAAAgAAAAL8AAACAAAAEQgAAAL8AAAAAAAAAgAAAAL8AAACAAAAAAAAAAL8AABZCAAAEQgAAAL8AABZCAAAEQgAAAAAAAAAAAAAEQgAAAAAAABZCAAAAAAAAAAAAABZCAAAAAAAAAAAAAAAAAAAEQgAAAAAAAAAAAAAEQgAAAL8AAAAAAAAEQgAAAL8AABZCAAAEQgAAAAAAABZCAAAAAAAAAAAAABZCAAAEQgAAAAAAABZCAAAEQgAAAL8AABZCAAAAAAAAAL8AABZC/////wAA/7//////AAD/v/////8AAP+//////wAA/78AAP9//3//vwAA/3//f/+/AAD/f/9//78AAP9//3//v/9/AAD//////38AAP//////fwAA//////9/AAD//////3////9//7//f////3//v/9/////f/+//3////9//7////9//////////3//////////f/////////9///////9//3////+//3//f////7//f/9/////v/9//3////+/")
}, {
"aabb": AABB(0, 0, -0.5, 33, 16, 0.5),
"attribute_data": PackedByteArray("AACMtgAAoMAAAAAAAAAAAAAAJcEAYBA3BQAlwe7/n8AYASC+AACgwAAAjLYAAKDAAAAAAAAAAAAAACC+AAAMNNgBIL4AACXBAAAgvpBV5TMAAAAAAAAAADyA7LYAACXBJ/4fPgAAJcE8gOy2AAAlwQAAAAAAAAAAAAAgPpBV5bPo/h8+AACgwAAAID4AAAy0AAAAAAAAAAAAAIy2AACgwAAAjLYAAKDA+/8kQRIAoMAAACVBAGAQtwAAAAAAAAAA"),
"format": 34359742487,
"index_count": 36,
"index_data": PackedByteArray("AAABAAIAAAACAAMABAAFAAYABAAGAAcACAAJAAoACAAKAAsADAANAA4ADAAOAA8AEAARABIAEAASABMAFAAVABYAFAAWABcA"),
"material": ExtResource("12_51fhi"),
"name": "world/texture_13_wall",
"primitive": 3,
"uv_scale": Vector4(0, 0, 0, 0),
"vertex_count": 24,
"vertex_data": PackedByteArray("AAAAAAAAgEEAAAC/AAAAAAAAAAAAAAC/AAAEQgAAAAAAAAC/AAAEQgAAgEEAAAC/AAAAAAAAgEEAAAC/AAAAAAAAgEEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAC/AAAEQgAAAAAAAAC/AAAAAAAAAAAAAAC/AAAAAAAAAAAAAAAAAAAEQgAAAAAAAAAAAAAEQgAAgEEAAAC/AAAEQgAAgEEAAAAAAAAAAAAAgEEAAAAAAAAAAAAAgEEAAAC/AAAEQgAAgEEAAAC/AAAEQgAAAAAAAAC/AAAEQgAAAAAAAAAAAAAEQgAAgEEAAAAAAAAAAAAAgEEAAAAAAAAEQgAAgEEAAAAAAAAEQgAAAAAAAAAAAAAAAAAAAAAAAAAA/////wAA/z//////AAD/P/////8AAP8//////wAA/z8AAP9//3//PwAA/3//f/8/AAD/f/9//z8AAP9//3//P/9/AAD/f/+//38AAP9//7//fwAA/3//v/9/AAD/f/+//3///wAA/v//f///AAD+//9///8AAP7//3///wAA/v////9//v/+f////3/+//5/////f/7//n////9//v/+f/9//3/+//8//3//f/7//z//f/9//v//P/9//3/+//8/")
}]

[sub_resource type="ArrayOccluder3D" id="ArrayOccluder3D_51fhi"]
vertices = PackedVector3Array(0, 0, 0, 0, -0.5, 0, 33, -0.5, 0, 33, 0, 0, 0, 0, 0, 0, 0, 37.5, 0, -0.5, 37.5, 0, -0.5, 0, 33, -0.5, 0, 0, -0.5, 0, 0, -0.5, 37.5, 33, -0.5, 37.5, 33, 0, 0, 33, 0, 37.5, 0, 0, 37.5, 0, 0, 0, 33, 0, 0, 33, -0.5, 0, 33, -0.5, 37.5, 33, 0, 37.5, 0, 0, 37.5, 33, 0, 37.5, 33, -0.5, 37.5, 0, -0.5, 37.5, 0, 16, -0.5, 0, 0, -0.5, 33, 0, -0.5, 33, 16, -0.5, 0, 16, -0.5, 0, 16, 0, 0, 0, 0, 0, 0, -0.5, 33, 0, -0.5, 0, 0, -0.5, 0, 0, 0, 33, 0, 0, 33, 16, -0.5, 33, 16, 0, 0, 16, 0, 0, 16, -0.5, 33, 16, -0.5, 33, 0, -0.5, 33, 0, 0, 33, 16, 0, 0, 16, 0, 33, 16, 0, 33, 0, 0, 0, 0, 0)
indices = PackedInt32Array(0, 1, 2, 0, 2, 3, 4, 5, 6, 4, 6, 7, 8, 9, 10, 8, 10, 11, 12, 13, 14, 12, 14, 15, 16, 17, 18, 16, 18, 19, 20, 21, 22, 20, 22, 23, 24, 25, 26, 24, 26, 27, 28, 29, 30, 28, 30, 31, 32, 33, 34, 32, 34, 35, 36, 37, 38, 36, 38, 39, 40, 41, 42, 40, 42, 43, 44, 45, 46, 44, 46, 47)

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_84wbe"]
points = PackedVector3Array(0, 0, 0, 0, -0.5, 0, 33, -0.5, 0, 33, 0, 0, 0, 0, 37.5, 0, -0.5, 37.5, 33, -0.5, 37.5, 33, 0, 37.5)

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_fb02w"]
points = PackedVector3Array(0, 16, -0.5, 0, 0, -0.5, 33, 0, -0.5, 33, 16, -0.5, 0, 16, 0, 0, 0, 0, 33, 0, 0, 33, 16, 0)

[node name="Node3D" type="Node3D"]

[node name="LevelManager" type="Node" parent="."]
script = ExtResource("1_ckm7l")

[node name="HUD" type="CanvasLayer" parent="."]
script = ExtResource("4_yxwn6")

[node name="Crosshair" type="TextureRect" parent="HUD"]
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -20.0
offset_top = -20.0
offset_right = 20.0
offset_bottom = 20.0
grow_horizontal = 2
grow_vertical = 2
scale = Vector2(0.35, 0.35)
pivot_offset = Vector2(64, 64)
metadata/_edit_use_anchors_ = true

[node name="Health" type="Label" parent="HUD"]
offset_left = 48.0
offset_top = 627.0
offset_right = 138.0
offset_bottom = 672.0
size_flags_horizontal = 0
size_flags_vertical = 8
text = "100%"
label_settings = SubResource("LabelSettings_nu0x4")
vertical_alignment = 2
metadata/_edit_use_anchors_ = true

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = ExtResource("6_vtbbq")

[node name="Door" type="CSGBox3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 8.1174, 2.09701, 8.74791)
size = Vector3(1, 3.15991, 25)

[node name="Door2" type="CSGBox3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 17.1174, 2.09701, 8.74791)
size = Vector3(1, 3.15991, 25)

[node name="Key" parent="." instance=ExtResource("7_6shu3")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.77899, 11.0654)

[node name="Enemies" type="Node" parent="."]

[node name="enemy-flying" parent="Enemies" node_paths=PackedStringArray("player") groups=["enemy"] instance=ExtResource("8_gi8j2")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 14, 2, 0)
player = NodePath("../../Player")

[node name="enemy-flying2" parent="Enemies" node_paths=PackedStringArray("player") groups=["enemy"] instance=ExtResource("8_gi8j2")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 14, 2, 9)
player = NodePath("../../Player")

[node name="enemy-flying3" parent="Enemies" node_paths=PackedStringArray("player") groups=["enemy"] instance=ExtResource("8_gi8j2")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 12, 2, 9)
player = NodePath("../../Player")

[node name="enemy-flying4" parent="Enemies" node_paths=PackedStringArray("player") groups=["enemy"] instance=ExtResource("8_gi8j2")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 12, 2, 0)
player = NodePath("../../Player")

[node name="Player" parent="." node_paths=PackedStringArray("crosshair") groups=["player"] instance=ExtResource("3_gi8j2")]
transform = Transform3D(-2.98023e-08, 0, -1, 0, 1, 0, 1, 0, -2.98023e-08, -0.252199, 6.4, -3.3393)
crosshair = NodePath("../HUD/Crosshair")

[node name="platform" parent="." instance=ExtResource("2_6shu3")]
transform = Transform3D(5.42831, 0, 0, 0, 1, 0, 0, 0, 4.36387, -0.00508869, 0, 0.31474)

[node name="platform" parent="platform" instance=ExtResource("2_6shu3")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.00508869, 0, 1.99799)

[node name="platform" parent="platform/platform" instance=ExtResource("2_6shu3")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.00508869, 0, 1.99799)

[node name="platform2" parent="platform" instance=ExtResource("2_6shu3")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2.01249, 0, -0.0430471)

[node name="platform" parent="platform/platform2" instance=ExtResource("2_6shu3")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.00508869, 0, 1.99799)

[node name="platform" parent="platform/platform2/platform" instance=ExtResource("2_6shu3")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.00508869, 0, 1.99799)

[node name="platform3" parent="platform" instance=ExtResource("2_6shu3")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3.99392, 0, -0.0401371)

[node name="platform" parent="platform/platform3" instance=ExtResource("2_6shu3")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.00508869, 0, 1.99799)

[node name="platform" parent="platform/platform3/platform" instance=ExtResource("2_6shu3")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.00508869, 0, 1.99799)

[node name="platform2" parent="platform/platform3" instance=ExtResource("2_6shu3")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2.01249, 0, -0.0430471)

[node name="platform" parent="platform/platform3/platform2" instance=ExtResource("2_6shu3")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.00508869, 0, 1.99799)

[node name="platform" parent="platform/platform3/platform2/platform" instance=ExtResource("2_6shu3")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.00508869, 0, 1.99799)

[node name="FuncGodotMap" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 5, 0)
script = ExtResource("10_ndmtw")
local_map_file = "uid://nxws172kpbj8"
map_settings = ExtResource("11_51fhi")
metadata/_custom_type_script = "uid://bc6mfq3ssor4q"

[node name="entity_0_worldspawn" type="StaticBody3D" parent="FuncGodotMap"]
collision_mask = 0

[node name="entity_0_mesh_instance" type="MeshInstance3D" parent="FuncGodotMap/entity_0_worldspawn"]
mesh = SubResource("ArrayMesh_ndmtw")

[node name="entity_0_occluder_instance" type="OccluderInstance3D" parent="FuncGodotMap/entity_0_worldspawn"]
occluder = SubResource("ArrayOccluder3D_51fhi")

[node name="entity_0_brush_0_collision_shape" type="CollisionShape3D" parent="FuncGodotMap/entity_0_worldspawn"]
shape = SubResource("ConvexPolygonShape3D_84wbe")

[node name="entity_0_brush_1_collision_shape" type="CollisionShape3D" parent="FuncGodotMap/entity_0_worldspawn"]
shape = SubResource("ConvexPolygonShape3D_fb02w")

[connection signal="body_entered" from="Key" to="LevelManager" method="_on_key_body_entered"]
